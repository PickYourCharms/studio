<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Style My Earrings</title>

<style>
  body {
    margin: 0;
    padding: 16px;
    font-family: system-ui, -apple-system, sans-serif;
    background: #faf7f2;
    text-align: center;
  }

  h2 {
    margin-bottom: 10px;
  }

  .canvas {
    position: relative;
    width: min(92vw, 360px);
    aspect-ratio: 1 / 1.2;
    margin: 0 auto;
    background: #fff;
    border-radius: 22px;
    padding: 18px;
    box-sizing: border-box;
  }

  .hooks {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .hook {
    position: absolute;
    top: 40px;
    transform-origin: top center;
  }

  .hook.left {
    left: 24%;
  }

  .hook.right {
    right: 24%;
  }

  .hook img {
    display: block;
    pointer-events: none;
  }

  .charm {
    position: absolute;
    cursor: pointer;
    user-select: none;
    transform-origin: top center;
  }

  .charm img {
    display: block;
    pointer-events: none;
  }

  .hint {
    margin-top: 10px;
    font-size: 14px;
    color: #666;
  }

  .tray {
    margin-top: 16px;
    background: #fff;
    padding: 12px;
    border-radius: 18px;
    display: flex;
    justify-content: center;
    gap: 14px;
  }

  .tray img {
    width: 44px;
    cursor: pointer;
  }

  .price-pill {
    position: absolute;
    top: 14px;
    right: 14px;
    background: #fff;
    padding: 8px 14px;
    border-radius: 999px;
    font-weight: 500;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  }

  .reset {
    margin-top: 12px;
    font-size: 14px;
    color: #666;
    cursor: pointer;
  }

  .cta {
    margin-top: 18px;
    background: #000;
    color: #fff;
    padding: 16px;
    border-radius: 999px;
    font-size: 16px;
  }
</style>
</head>

<body>

<h2>Style My Earrings</h2>

<div class="canvas" id="canvas">
  <div class="price-pill">Rs. 249</div>

  <div class="hooks">
    <div class="hook left">
      <img src="assets/bases/LeftHook_gold.png" id="leftHook" />
    </div>

    <div class="hook right">
      <img src="assets/bases/RightHook_gold.png" id="rightHook" />
    </div>
  </div>
</div>

<div class="hint">Tap a charm to add ‚Ä¢ Tap charm to remove</div>

<div class="tray">
  <img src="assets/charms/3DBowRibbon_Charm_Gold.png" onclick="addCharm(this.src)" />
  <img src="assets/charms/EvilEye_Charm_Gold.png" onclick="addCharm(this.src)" />
  <img src="assets/charms/LetterA_Charm_Gold.png" onclick="addCharm(this.src)" />
  <img src="assets/charms/NorthStar_Charm_Gold.png" onclick="addCharm(this.src)" />
  <img src="assets/charms/RedCherry_Charm_Gold.png" onclick="addCharm(this.src)" />
</div>

<div class="reset" onclick="resetEarrings()">Reset</div>

<div class="cta">Love it ¬∑ Add to Bag üõçÔ∏è</div>

<script>
/* =========================
   üîß EARRING PHYSICS PANEL
   (ONLY TUNE THIS)
   ========================= */
const EARRING_PHYSICS = {
  hookScale: 0.45,      // resize hook
  charmSize: 64,        // charm size
  charmOffsetY: 6,      // hug distance

  leftHook: {
    anchorX: 96,
    anchorY: 168
  },

  rightHook: {
    anchorX: 104,
    anchorY: 168
  }
};

const canvas = document.getElementById('canvas');
const leftHookEl = document.getElementById('leftHook');
const rightHookEl = document.getElementById('rightHook');

leftHookEl.style.transform = `scale(${EARRING_PHYSICS.hookScale})`;
rightHookEl.style.transform = `scale(${EARRING_PHYSICS.hookScale})`;

let charms = { left: null, right: null };

function addCharm(src) {
  if (!charms.left) {
    charms.left = src;
  } else if (!charms.right) {
    charms.right = src;
  } else {
    return;
  }
  render();
}

function removeCharm(side) {
  charms[side] = null;
  render();
}

function resetEarrings() {
  charms.left = null;
  charms.right = null;
  render();
}

function render() {
  document.querySelectorAll('.charm').forEach(el => el.remove());

  renderCharm('left');
  renderCharm('right');
}

function renderCharm(side) {
  const src = charms[side];
  if (!src) return;

  const hookEl = side === 'left' ? leftHookEl : rightHookEl;
  const hookRect = hookEl.getBoundingClientRect();
  const canvasRect = canvas.getBoundingClientRect();

  const physics = side === 'left'
    ? EARRING_PHYSICS.leftHook
    : EARRING_PHYSICS.rightHook;

  const x = hookRect.left - canvasRect.left + physics.anchorX;
  const y = hookRect.top - canvasRect.top + physics.anchorY + EARRING_PHYSICS.charmOffsetY;

  const wrapper = document.createElement('div');
  wrapper.className = 'charm';
  wrapper.style.left = `${x - EARRING_PHYSICS.charmSize / 2}px`;
  wrapper.style.top = `${y}px`;

  const img = document.createElement('img');
  img.src = src;
  img.style.width = EARRING_PHYSICS.charmSize + 'px';

  wrapper.appendChild(img);
  wrapper.onclick = () => removeCharm(side);

  canvas.appendChild(wrapper);
}
</script>

</body>
</html>
